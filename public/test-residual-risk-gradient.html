<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Residual Risk Matrix - Gradient Background</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="/css/residual-risk.css">
    <link rel="stylesheet" href="/css/residual-risk-gradient-matrix.css">
    <style>
        body {
            background: #f5f7fa;
            padding: 20px;
        }
        .test-section {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .badge-demo {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
        }
        .badge-item {
            text-align: center;
        }
        .badge-item p {
            margin-top: 8px;
            font-size: 12px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <h1 class="mb-4">üé® Test Residual Risk Matrix - Gradient Background</h1>
        
        <!-- Badge Demo Section -->
        <div class="test-section">
            <h3>üìå Review Status Badges</h3>
            <p>Badge berubah berdasarkan jarak waktu ke deadline review:</p>
            
            <div class="badge-demo">
                <div class="badge-item">
                    <span class="badge-review-status badge-review-safe">REVIEWED</span>
                    <p>> 1 bulan (Aman)</p>
                </div>
                <div class="badge-item">
                    <span class="badge-review-status badge-review-urgent">‚ö† REVIEWED (25d)</span>
                    <p>< 1 bulan (Urgent)</p>
                </div>
                <div class="badge-item">
                    <span class="badge-review-status badge-review-critical">üö® OVERDUE (3d)</span>
                    <p>< 7 hari / Overdue (Critical)</p>
                </div>
            </div>
        </div>
        
        <!-- Risk Level Badges -->
        <div class="test-section">
            <h3>üè∑Ô∏è Risk Level Badges</h3>
            <div class="badge-demo">
                <div class="badge-item">
                    <span class="badge-status badge-low-risk">LOW RISK</span>
                    <p>Risiko Rendah</p>
                </div>
                <div class="badge-item">
                    <span class="badge-status badge-medium-risk">MEDIUM RISK</span>
                    <p>Risiko Sedang</p>
                </div>
                <div class="badge-item">
                    <span class="badge-status badge-high-risk">HIGH RISK</span>
                    <p>Risiko Tinggi</p>
                </div>
                <div class="badge-item">
                    <span class="badge-status badge-extreme-high">EXTREME HIGH</span>
                    <p>Risiko Sangat Tinggi</p>
                </div>
            </div>
        </div>
        
        <!-- Matrix Chart Demo -->
        <div class="test-section">
            <h3>üìä Residual Risk Matrix dengan Gradient Background</h3>
            <p>Latar belakang grafik dengan gradasi warna sesuai tingkat risiko:</p>
            <ul>
                <li><strong style="color: #10B981;">Hijau</strong> - Low Risk (Risiko Rendah)</li>
                <li><strong style="color: #F59E0B;">Kuning/Amber</strong> - Medium Risk (Risiko Sedang)</li>
                <li><strong style="color: #F97316;">Orange</strong> - High Risk (Risiko Tinggi)</li>
                <li><strong style="color: #EF4444;">Merah</strong> - Extreme Risk (Risiko Sangat Tinggi)</li>
            </ul>
            
            <div class="risk-matrix-container" style="margin-top: 20px;">
                <h4>üéØ Residual Risk Matrix</h4>
                <div style="position: relative; height: 450px;">
                    <canvas id="test-matrix-chart"></canvas>
                </div>
                
                <div class="risk-matrix-legend">
                    <div class="legend-item">
                        <div class="legend-symbol" style="background: #00E5FF; border: 2px solid #006064; border-radius: 50%; width: 18px; height: 18px;"></div>
                        <span>Inherent Risk Rating</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-symbol residual-icon" style="color: #FFD700; font-size: 20px;">‚òÖ</div>
                        <span>Residual Risk Rating</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-symbol" style="width: 0; height: 0; border-left: 9px solid transparent; border-right: 9px solid transparent; border-bottom: 16px solid #374151;"></div>
                        <span>Risk Appetite</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Sample Table -->
        <div class="test-section">
            <h3>üìã Sample Data Table dengan Review Status</h3>
            <div class="table-responsive">
                <table class="table residual-risk-table">
                    <thead>
                        <tr>
                            <th>Kode Risiko</th>
                            <th>Unit Kerja</th>
                            <th>Inherent</th>
                            <th>Residual</th>
                            <th>Reduction</th>
                            <th>Level</th>
                            <th>Review Status</th>
                            <th>Next Review</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>RS-001</strong></td>
                            <td>Komite Medik</td>
                            <td><span class="badge-status badge-high-risk">12</span></td>
                            <td><span class="badge-status badge-low-risk">4</span></td>
                            <td><strong style="color: #059669;">66.7%</strong></td>
                            <td><span class="badge-status badge-low-risk">RENDAH</span></td>
                            <td><span class="badge-review-status badge-review-safe">‚úì REVIEWED</span></td>
                            <td>2026-06-30</td>
                        </tr>
                        <tr>
                            <td><strong>RT-001</strong></td>
                            <td>Komite PMKP</td>
                            <td><span class="badge-status badge-extreme-high">20</span></td>
                            <td><span class="badge-status badge-medium-risk">8</span></td>
                            <td><strong style="color: #059669;">60.0%</strong></td>
                            <td><span class="badge-status badge-low-risk">RENDAH</span></td>
                            <td><span class="badge-review-status badge-review-urgent">‚ö† REVIEWED</span></td>
                            <td>2026-02-05</td>
                        </tr>
                        <tr>
                            <td><strong>RK-002</strong></td>
                            <td>Komite PPI</td>
                            <td><span class="badge-status badge-extreme-high">20</span></td>
                            <td><span class="badge-status badge-medium-risk">8</span></td>
                            <td><strong style="color: #059669;">60.0%</strong></td>
                            <td><span class="badge-status badge-low-risk">RENDAH</span></td>
                            <td><span class="badge-review-status badge-review-critical">üö® OVERDUE</span></td>
                            <td>2026-01-10</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <script src="/js/residual-risk-gradient-matrix.js"></script>
    <script src="/js/review-status-badge-handler.js"></script>
    <script>
        // Sample data for testing
        const sampleData = [
            {
                risk_inputs: { kode_risiko: 'RS-001', risk_inherent_analysis: [{ risk_value: 12, impact: 4, probability: 3, risk_level: 'HIGH' }] },
                impact: 2, probability: 2, risk_value: 4, risk_level: 'LOW RISK'
            },
            {
                risk_inputs: { kode_risiko: 'RT-001', risk_inherent_analysis: [{ risk_value: 20, impact: 5, probability: 4, risk_level: 'EXTREME' }] },
                impact: 4, probability: 2, risk_value: 8, risk_level: 'MEDIUM RISK'
            },
            {
                risk_inputs: { kode_risiko: 'RK-002', risk_inherent_analysis: [{ risk_value: 15, impact: 3, probability: 5, risk_level: 'HIGH' }] },
                impact: 2, probability: 4, risk_value: 8, risk_level: 'MEDIUM RISK'
            },
            {
                risk_inputs: { kode_risiko: 'RO-003', risk_inherent_analysis: [{ risk_value: 25, impact: 5, probability: 5, risk_level: 'EXTREME' }] },
                impact: 4, probability: 4, risk_value: 16, risk_level: 'HIGH RISK'
            },
            {
                risk_inputs: { kode_risiko: 'RF-004', risk_inherent_analysis: [{ risk_value: 9, impact: 3, probability: 3, risk_level: 'MEDIUM' }] },
                impact: 1, probability: 3, risk_value: 3, risk_level: 'LOW RISK'
            }
        ];
        
        // Render chart when page loads
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof GradientRiskMatrix !== 'undefined') {
                GradientRiskMatrix.render('test-matrix-chart', sampleData);
                console.log('‚úÖ Gradient Risk Matrix rendered successfully');
            } else {
                console.error('‚ùå GradientRiskMatrix not loaded');
            }
        });
    </script>
</body>
</html>
