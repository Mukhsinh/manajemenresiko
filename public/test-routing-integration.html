<!DOCTYPE html>\n<html lang=\"id\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Test Routing Integration - Risk Management System</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\" rel=\"stylesheet\">\n    <style>\n        body {\n            background-color: #f8f9fa;\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n        }\n        \n        .test-container {\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 2rem;\n        }\n        \n        .test-header {\n            background: #ffffff;\n            color: white;\n            padding: 2rem;\n            border-radius: 10px;\n            margin-bottom: 2rem;\n            text-align: center;\n        }\n        \n        .test-section {\n            background: white;\n            border-radius: 10px;\n            padding: 1.5rem;\n            margin-bottom: 1.5rem;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n        }\n        \n        .test-result {\n            padding: 1rem;\n            border-radius: 5px;\n            margin: 0.5rem 0;\n            font-family: monospace;\n            font-size: 0.9rem;\n        }\n        \n        .success {\n            background-color: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n        \n        .error {\n            background-color: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n        \n        .info {\n            background-color: #d1ecf1;\n            color: #0c5460;\n            border: 1px solid #bee5eb;\n        }\n        \n        .warning {\n            background-color: #fff3cd;\n            color: #856404;\n            border: 1px solid #ffeaa7;\n        }\n        \n        .btn-test {\n            margin: 0.25rem;\n        }\n        \n        .url-display {\n            background: #f8f9fa;\n            padding: 0.5rem;\n            border-radius: 3px;\n            font-family: monospace;\n            font-size: 0.9rem;\n            margin: 0.5rem 0;\n        }\n        \n        .navigation-test {\n            display: flex;\n            flex-wrap: wrap;\n            gap: 0.5rem;\n            margin: 1rem 0;\n        }\n        \n        .route-info {\n            background: #e9ecef;\n            padding: 0.5rem;\n            border-radius: 3px;\n            margin: 0.25rem 0;\n            font-size: 0.9rem;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"test-container\">\n        <div class=\"test-header\">\n            <h1><i class=\"fas fa-route\"></i> Test Routing Integration</h1>\n            <p>Comprehensive testing for URL routing refactor implementation</p>\n            <div class=\"url-display\">\n                Current URL: <span id=\"current-url\"></span>\n            </div>\n        </div>\n        \n        <!-- Router Initialization Test -->\n        <div class=\"test-section\">\n            <h3><i class=\"fas fa-cog\"></i> Router Initialization</h3>\n            <button class=\"btn btn-primary btn-test\" onclick=\"testRouterInitialization()\">Test Router Init</button>\n            <div id=\"router-init-result\"></div>\n        </div>\n        \n        <!-- Route Configuration Test -->\n        <div class=\"test-section\">\n            <h3><i class=\"fas fa-map\"></i> Route Configuration</h3>\n            <button class=\"btn btn-primary btn-test\" onclick=\"testRouteConfiguration()\">Test Route Config</button>\n            <div id=\"route-config-result\"></div>\n        </div>\n        \n        <!-- Navigation Test -->\n        <div class=\"test-section\">\n            <h3><i class=\"fas fa-compass\"></i> Navigation Testing</h3>\n            <div class=\"navigation-test\">\n                <button class=\"btn btn-success btn-test\" onclick=\"testNavigation('/dashboard')\">Dashboard</button>\n                <button class=\"btn btn-success btn-test\" onclick=\"testNavigation('/visi-misi')\">Visi Misi</button>\n                <button class=\"btn btn-success btn-test\" onclick=\"testNavigation('/rencana-strategis')\">Rencana Strategis</button>\n                <button class=\"btn btn-success btn-test\" onclick=\"testNavigation('/analisis-swot')\">Analisis SWOT</button>\n                <button class=\"btn btn-success btn-test\" onclick=\"testNavigation('/manajemen-risiko/input-data')\">Risk Input</button>\n                <button class=\"btn btn-success btn-test\" onclick=\"testNavigation('/manajemen-risiko/risk-profile')\">Risk Profile</button>\n                <button class=\"btn btn-success btn-test\" onclick=\"testNavigation('/laporan')\">Laporan</button>\n                <button class=\"btn btn-danger btn-test\" onclick=\"testNavigation('/invalid-route')\">Invalid Route</button>\n            </div>\n            <div id=\"navigation-result\"></div>\n        </div>\n        \n        <!-- Browser History Test -->\n        <div class=\"test-section\">\n            <h3><i class=\"fas fa-history\"></i> Browser History</h3>\n            <button class=\"btn btn-primary btn-test\" onclick=\"testBrowserHistory()\">Test History</button>\n            <button class=\"btn btn-secondary btn-test\" onclick=\"goBack()\">Go Back</button>\n            <button class=\"btn btn-secondary btn-test\" onclick=\"goForward()\">Go Forward</button>\n            <div id=\"history-result\"></div>\n        </div>\n        \n        <!-- Deep Linking Test -->\n        <div class=\"test-section\">\n            <h3><i class=\"fas fa-link\"></i> Deep Linking</h3>\n            <button class=\"btn btn-primary btn-test\" onclick=\"testDeepLinking()\">Test Deep Links</button>\n            <div id=\"deep-link-result\"></div>\n        </div>\n        \n        <!-- Authentication Guard Test -->\n        <div class=\"test-section\">\n            <h3><i class=\"fas fa-shield-alt\"></i> Authentication Guard</h3>\n            <button class=\"btn btn-primary btn-test\" onclick=\"testAuthGuard()\">Test Auth Guard</button>\n            <div id=\"auth-guard-result\"></div>\n        </div>\n        \n        <!-- 404 Error Handling Test -->\n        <div class=\"test-section\">\n            <h3><i class=\"fas fa-exclamation-triangle\"></i> 404 Error Handling</h3>\n            <button class=\"btn btn-primary btn-test\" onclick=\"test404Handling()\">Test 404</button>\n            <div id=\"error-404-result\"></div>\n        </div>\n        \n        <!-- URL Format Validation Test -->\n        <div class=\"test-section\">\n            <h3><i class=\"fas fa-check-circle\"></i> URL Format Validation</h3>\n            <button class=\"btn btn-primary btn-test\" onclick=\"testUrlValidation()\">Test URL Formats</button>\n            <div id=\"url-validation-result\"></div>\n        </div>\n        \n        <!-- Integration Test -->\n        <div class=\"test-section\">\n            <h3><i class=\"fas fa-puzzle-piece\"></i> Complete Integration Test</h3>\n            <button class=\"btn btn-warning btn-test\" onclick=\"runCompleteTest()\">Run All Tests</button>\n            <div id=\"complete-test-result\"></div>\n        </div>\n    </div>\n    \n    <!-- Load required scripts -->\n    <script src=\"js/config.js\"></script>\n    <script src=\"js/router.js\"></script>\n    <script src=\"js/route-config.js\"></script>\n    <script src=\"js/404-handler.js\"></script>\n    <script src=\"js/router-integration.js\"></script>\n    \n    <script>\n        // Update current URL display\n        function updateCurrentUrl() {\n            document.getElementById('current-url').textContent = window.location.href;\n        }\n        \n        // Initialize URL display\n        updateCurrentUrl();\n        \n        // Update URL on navigation\n        window.addEventListener('popstate', updateCurrentUrl);\n        \n        // Test router initialization\n        function testRouterInitialization() {\n            const resultDiv = document.getElementById('router-init-result');\n            let results = [];\n            \n            try {\n                // Check if router classes are available\n                results.push({\n                    test: 'SPARouter class available',\n                    result: typeof window.SPARouter === 'function',\n                    status: typeof window.SPARouter === 'function' ? 'success' : 'error'\n                });\n                \n                results.push({\n                    test: 'AuthGuard class available',\n                    result: typeof window.AuthGuard === 'function',\n                    status: typeof window.AuthGuard === 'function' ? 'success' : 'error'\n                });\n                \n                results.push({\n                    test: 'Router instance created',\n                    result: !!window.appRouter,\n                    status: !!window.appRouter ? 'success' : 'error'\n                });\n                \n                results.push({\n                    test: 'Auth guard instance created',\n                    result: !!window.authGuard,\n                    status: !!window.authGuard ? 'success' : 'error'\n                });\n                \n                results.push({\n                    test: 'Router integration available',\n                    result: !!window.routerIntegration,\n                    status: !!window.routerIntegration ? 'success' : 'error'\n                });\n                \n            } catch (error) {\n                results.push({\n                    test: 'Router initialization error',\n                    result: error.message,\n                    status: 'error'\n                });\n            }\n            \n            displayResults(resultDiv, results);\n        }\n        \n        // Test route configuration\n        function testRouteConfiguration() {\n            const resultDiv = document.getElementById('route-config-result');\n            let results = [];\n            \n            try {\n                // Check if route config is available\n                results.push({\n                    test: 'ROUTE_CONFIG available',\n                    result: !!window.ROUTE_CONFIG,\n                    status: !!window.ROUTE_CONFIG ? 'success' : 'error'\n                });\n                \n                if (window.ROUTE_CONFIG) {\n                    const routeCount = Object.keys(window.ROUTE_CONFIG).length;\n                    results.push({\n                        test: 'Route count',\n                        result: `${routeCount} routes configured`,\n                        status: routeCount > 0 ? 'success' : 'warning'\n                    });\n                    \n                    // Test specific routes\n                    const testRoutes = ['/dashboard', '/visi-misi', '/manajemen-risiko/input-data', '/login', '/404'];\n                    testRoutes.forEach(route => {\n                        const exists = !!window.ROUTE_CONFIG[route];\n                        results.push({\n                            test: `Route ${route}`,\n                            result: exists ? 'configured' : 'missing',\n                            status: exists ? 'success' : 'error'\n                        });\n                    });\n                }\n                \n                // Test helper functions\n                results.push({\n                    test: 'getUrlForPage function',\n                    result: typeof window.getUrlForPage === 'function',\n                    status: typeof window.getUrlForPage === 'function' ? 'success' : 'error'\n                });\n                \n                results.push({\n                    test: 'getPageNameForUrl function',\n                    result: typeof window.getPageNameForUrl === 'function',\n                    status: typeof window.getPageNameForUrl === 'function' ? 'success' : 'error'\n                });\n                \n            } catch (error) {\n                results.push({\n                    test: 'Route configuration error',\n                    result: error.message,\n                    status: 'error'\n                });\n            }\n            \n            displayResults(resultDiv, results);\n        }\n        \n        // Test navigation\n        function testNavigation(url) {\n            const resultDiv = document.getElementById('navigation-result');\n            \n            try {\n                console.log(`Testing navigation to: ${url}`);\n                \n                if (window.appRouter) {\n                    window.appRouter.navigate(url);\n                    \n                    setTimeout(() => {\n                        const currentRoute = window.appRouter.getCurrentRoute();\n                        const result = {\n                            test: `Navigation to ${url}`,\n                            result: `Current route: ${currentRoute ? currentRoute.path : 'unknown'}`,\n                            status: currentRoute && currentRoute.path === url ? 'success' : 'warning'\n                        };\n                        \n                        displayResults(resultDiv, [result], true);\n                        updateCurrentUrl();\n                    }, 100);\n                } else {\n                    displayResults(resultDiv, [{\n                        test: `Navigation to ${url}`,\n                        result: 'Router not available',\n                        status: 'error'\n                    }], true);\n                }\n                \n            } catch (error) {\n                displayResults(resultDiv, [{\n                    test: `Navigation to ${url}`,\n                    result: error.message,\n                    status: 'error'\n                }], true);\n            }\n        }\n        \n        // Test browser history\n        function testBrowserHistory() {\n            const resultDiv = document.getElementById('history-result');\n            let results = [];\n            \n            try {\n                // Test history API availability\n                results.push({\n                    test: 'History API available',\n                    result: !!(window.history && window.history.pushState),\n                    status: !!(window.history && window.history.pushState) ? 'success' : 'error'\n                });\n                \n                // Test history length\n                results.push({\n                    test: 'History length',\n                    result: window.history.length,\n                    status: window.history.length > 0 ? 'success' : 'warning'\n                });\n                \n                // Test popstate listener\n                let popstateListenerExists = false;\n                if (window.appRouter) {\n                    // Check if router has popstate listener\n                    popstateListenerExists = true; // Assume it exists if router is initialized\n                }\n                \n                results.push({\n                    test: 'Popstate listener',\n                    result: popstateListenerExists ? 'registered' : 'not found',\n                    status: popstateListenerExists ? 'success' : 'warning'\n                });\n                \n            } catch (error) {\n                results.push({\n                    test: 'Browser history error',\n                    result: error.message,\n                    status: 'error'\n                });\n            }\n            \n            displayResults(resultDiv, results);\n        }\n        \n        // Test deep linking\n        function testDeepLinking() {\n            const resultDiv = document.getElementById('deep-link-result');\n            let results = [];\n            \n            try {\n                // Test URL parsing\n                const testUrls = [\n                    '/dashboard',\n                    '/visi-misi',\n                    '/manajemen-risiko/input-data',\n                    '/manajemen-risiko/risk-profile'\n                ];\n                \n                testUrls.forEach(url => {\n                    if (window.appRouter) {\n                        const route = window.appRouter.matchRoute(url);\n                        results.push({\n                            test: `Deep link ${url}`,\n                            result: route ? 'matched' : 'not matched',\n                            status: route ? 'success' : 'error'\n                        });\n                    }\n                });\n                \n                // Test current URL handling\n                const currentPath = window.location.pathname;\n                results.push({\n                    test: 'Current URL handling',\n                    result: `Current path: ${currentPath}`,\n                    status: 'info'\n                });\n                \n            } catch (error) {\n                results.push({\n                    test: 'Deep linking error',\n                    result: error.message,\n                    status: 'error'\n                });\n            }\n            \n            displayResults(resultDiv, results);\n        }\n        \n        // Test authentication guard\n        function testAuthGuard() {\n            const resultDiv = document.getElementById('auth-guard-result');\n            let results = [];\n            \n            try {\n                if (window.authGuard) {\n                    // Test public routes\n                    const publicRoute = { auth: false };\n                    const canAccessPublic = window.authGuard.canActivate(publicRoute);\n                    results.push({\n                        test: 'Public route access',\n                        result: canAccessPublic ? 'allowed' : 'denied',\n                        status: canAccessPublic ? 'success' : 'error'\n                    });\n                    \n                    // Test protected routes\n                    const protectedRoute = { auth: true };\n                    const canAccessProtected = window.authGuard.canActivate(protectedRoute);\n                    results.push({\n                        test: 'Protected route access',\n                        result: canAccessProtected ? 'allowed (authenticated)' : 'denied (not authenticated)',\n                        status: 'info'\n                    });\n                    \n                    // Test redirect functionality\n                    results.push({\n                        test: 'Redirect to login function',\n                        result: typeof window.authGuard.redirectToLogin === 'function',\n                        status: typeof window.authGuard.redirectToLogin === 'function' ? 'success' : 'error'\n                    });\n                    \n                } else {\n                    results.push({\n                        test: 'Auth guard availability',\n                        result: 'Auth guard not initialized',\n                        status: 'error'\n                    });\n                }\n                \n            } catch (error) {\n                results.push({\n                    test: 'Auth guard error',\n                    result: error.message,\n                    status: 'error'\n                });\n            }\n            \n            displayResults(resultDiv, results);\n        }\n        \n        // Test 404 handling\n        function test404Handling() {\n            const resultDiv = document.getElementById('error-404-result');\n            let results = [];\n            \n            try {\n                // Test 404 handler availability\n                results.push({\n                    test: '404 handler function',\n                    result: typeof window.show404Error === 'function',\n                    status: typeof window.show404Error === 'function' ? 'success' : 'error'\n                });\n                \n                // Test URL validation\n                if (window.isValidRoute) {\n                    const validUrl = window.isValidRoute('/dashboard');\n                    const invalidUrl = window.isValidRoute('/invalid-page');\n                    \n                    results.push({\n                        test: 'Valid URL detection',\n                        result: validUrl ? 'correctly identified' : 'failed to identify',\n                        status: validUrl ? 'success' : 'error'\n                    });\n                    \n                    results.push({\n                        test: 'Invalid URL detection',\n                        result: !invalidUrl ? 'correctly identified' : 'failed to identify',\n                        status: !invalidUrl ? 'success' : 'error'\n                    });\n                }\n                \n                // Test navigation to invalid route\n                if (window.appRouter) {\n                    console.log('Testing navigation to invalid route...');\n                    window.appRouter.navigate('/this-page-does-not-exist');\n                    \n                    setTimeout(() => {\n                        const has404Page = !!document.getElementById('error-404-page');\n                        results.push({\n                            test: '404 page display',\n                            result: has404Page ? 'displayed' : 'not displayed',\n                            status: has404Page ? 'success' : 'warning'\n                        });\n                        \n                        displayResults(resultDiv, results);\n                    }, 500);\n                    return;\n                }\n                \n            } catch (error) {\n                results.push({\n                    test: '404 handling error',\n                    result: error.message,\n                    status: 'error'\n                });\n            }\n            \n            displayResults(resultDiv, results);\n        }\n        \n        // Test URL format validation\n        function testUrlValidation() {\n            const resultDiv = document.getElementById('url-validation-result');\n            let results = [];\n            \n            try {\n                if (window.isValidUrlFormat) {\n                    const testUrls = [\n                        { url: '/dashboard', expected: true },\n                        { url: '/visi-misi', expected: true },\n                        { url: '/manajemen-risiko/input-data', expected: true },\n                        { url: '/invalid_url_with_underscores', expected: false },\n                        { url: '/UPPERCASE-URL', expected: false },\n                        { url: '/', expected: true }\n                    ];\n                    \n                    testUrls.forEach(test => {\n                        const isValid = window.isValidUrlFormat(test.url);\n                        results.push({\n                            test: `URL format: ${test.url}`,\n                            result: isValid === test.expected ? 'correct validation' : 'incorrect validation',\n                            status: isValid === test.expected ? 'success' : 'error'\n                        });\n                    });\n                } else {\n                    results.push({\n                        test: 'URL validation function',\n                        result: 'Function not available',\n                        status: 'error'\n                    });\n                }\n                \n            } catch (error) {\n                results.push({\n                    test: 'URL validation error',\n                    result: error.message,\n                    status: 'error'\n                });\n            }\n            \n            displayResults(resultDiv, results);\n        }\n        \n        // Run complete integration test\n        function runCompleteTest() {\n            const resultDiv = document.getElementById('complete-test-result');\n            resultDiv.innerHTML = '<div class=\"info\">Running complete integration test...</div>';\n            \n            // Run all tests in sequence\n            setTimeout(() => {\n                testRouterInitialization();\n                setTimeout(() => {\n                    testRouteConfiguration();\n                    setTimeout(() => {\n                        testBrowserHistory();\n                        setTimeout(() => {\n                            testDeepLinking();\n                            setTimeout(() => {\n                                testAuthGuard();\n                                setTimeout(() => {\n                                    testUrlValidation();\n                                    \n                                    // Summary\n                                    const summary = {\n                                        test: 'Complete integration test',\n                                        result: 'All tests completed. Check individual sections for details.',\n                                        status: 'success'\n                                    };\n                                    \n                                    displayResults(resultDiv, [summary]);\n                                }, 500);\n                            }, 500);\n                        }, 500);\n                    }, 500);\n                }, 500);\n            }, 500);\n        }\n        \n        // Helper functions\n        function goBack() {\n            window.history.back();\n            setTimeout(updateCurrentUrl, 100);\n        }\n        \n        function goForward() {\n            window.history.forward();\n            setTimeout(updateCurrentUrl, 100);\n        }\n        \n        function displayResults(container, results, append = false) {\n            if (!append) {\n                container.innerHTML = '';\n            }\n            \n            results.forEach(result => {\n                const div = document.createElement('div');\n                div.className = `test-result ${result.status}`;\n                div.innerHTML = `\n                    <strong>${result.test}:</strong> ${result.result}\n                `;\n                container.appendChild(div);\n            });\n        }\n        \n        // Initialize tests on page load\n        document.addEventListener('DOMContentLoaded', function() {\n            console.log('ðŸ§ª Routing integration test page loaded');\n            \n            // Auto-run basic tests\n            setTimeout(() => {\n                testRouterInitialization();\n                testRouteConfiguration();\n            }, 1000);\n        });\n    </script>\n</body>\n</html>"