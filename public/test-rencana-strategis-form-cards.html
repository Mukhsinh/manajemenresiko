<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Rencana Strategis - Form & Cards</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Rencana Strategis CSS -->
    <link rel="stylesheet" href="/css/rencana-strategis.css?v=2.0">
    
    <style>
        body {
            background: #f5f7fa;
            padding: 20px;
        }
        .page-header {
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e9ecef;
        }
        .page-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 0.25rem;
        }
        .page-subtitle {
            color: #6c757d;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="page-header">
            <h1 class="page-title"><i class="fas fa-chart-line me-2"></i>Rencana Strategis</h1>
            <p class="page-subtitle">Perencanaan Strategis Organisasi</p>
        </div>
        
        <div id="rencana-strategis-content">
            <!-- Content will be loaded here -->
            <div class="text-center py-5">
                <div class="spinner-border text-primary" role="status"></div>
                <p class="mt-3 text-muted">Memuat data...</p>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Mock API -->
    <script>
        // Mock data
        const mockData = [
            {
                id: '1',
                kode: 'RS-2026-001',
                nama_rencana: 'Peningkatan Kualitas Pelayanan Kesehatan',
                deskripsi: 'Program strategis untuk meningkatkan kualitas pelayanan kesehatan di seluruh unit kerja rumah sakit.',
                target: 'Meningkatkan indeks kepuasan pasien menjadi 90%',
                periode_mulai: '2026-01-01',
                periode_selesai: '2026-12-31',
                status: 'Aktif'
            },
            {
                id: '2',
                kode: 'RS-2026-002',
                nama_rencana: 'Digitalisasi Sistem Informasi Rumah Sakit',
                deskripsi: 'Implementasi sistem informasi terintegrasi untuk mendukung operasional rumah sakit.',
                target: 'Implementasi 100% modul SIMRS',
                periode_mulai: '2026-02-01',
                periode_selesai: '2026-08-31',
                status: 'Draft'
            },
            {
                id: '3',
                kode: 'RS-2025-003',
                nama_rencana: 'Pengembangan SDM Kesehatan',
                deskripsi: 'Program pelatihan dan pengembangan kompetensi tenaga kesehatan.',
                target: 'Pelatihan 500 tenaga kesehatan',
                periode_mulai: '2025-01-01',
                periode_selesai: '2025-12-31',
                status: 'Selesai'
            }
        ];
        
        const mockMissions = [
            {
                id: '1',
                misi: '1. Memberikan pelayanan kesehatan berkualitas\n2. Mengembangkan SDM profesional\n3. Menerapkan teknologi modern'
            }
        ];
        
        // Mock API function
        window.apiCall = async (endpoint, options = {}) => {
            console.log('API Call:', endpoint, options);
            
            await new Promise(resolve => setTimeout(resolve, 500));
            
            if (endpoint.includes('/api/rencana-strategis/generate/kode')) {
                return { kode: 'RS-2026-' + String(Math.floor(Math.random() * 1000)).padStart(3, '0') };
            }
            
            if (endpoint.includes('/api/rencana-strategis') && !endpoint.includes('/')) {
                if (options.method === 'POST') {
                    const newItem = { ...options.body, id: Date.now().toString() };
                    mockData.push(newItem);
                    return { message: 'Success', data: newItem };
                }
                return mockData;
            }
            
            if (endpoint.includes('/api/visi-misi')) {
                return mockMissions;
            }
            
            return [];
        };
    </script>
    
    <!-- Rencana Strategis Module -->
    <script src="/js/rencana-strategis.js?v=5.2.0"></script>
    
    <script>
        // Initialize module when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded, initializing Rencana Strategis Module...');
            
            // Wait a bit for module to be ready
            setTimeout(() => {
                if (typeof RencanaStrategisModule !== 'undefined') {
                    RencanaStrategisModule.load();
                } else {
                    console.error('RencanaStrategisModule not found!');
                }
            }, 100);
        });
    </script>
</body>
</html>
